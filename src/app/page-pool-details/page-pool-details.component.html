<div class="page" *ngIf="poolDetails !== null">
  <h1>{{poolDetails.name}}</h1>
  
  <table>
    <tbody>
      <tr>
        <th>Address:</th>
        <td>{{address}}</td>
      </tr>

      <tr *ngIf="poolDetails.fixedPaymentAmountWei > 0">
        <th>Fixed payment amount (Wei):</th>
        <td>{{poolDetails.fixedPaymentAmountWei}}</td>
      </tr>

      <tr>
        <th>Uses ERC 721 tokens?</th>
        <td>{{poolDetails.useErc721 ? "Yes" : "No"}}</td>
      </tr>

      <tr>
        <th>Disburses a single payment?</th>
        <td>{{poolDetails.useSinglePayment ? "Yes" : "No"}}</td>
      </tr>

      <tr>
        <th>Current state:</th>
        <td>
          {{poolDetails.stateExternalName}}

          <div *ngIf="isOwner">
            <button
              *ngIf="poolDetails.stateName === 'registration' && poolDetails.participantAddresses.length > 1"
              (click)="onClickCloseRegistration()">
              Close Registration
            </button>

            <button
              *ngIf="poolDetails.stateName === 'mintingTokens'"
              (click)="onClickMintTokens()">
              Mint Tokens
            </button>

            <button
              *ngIf="poolDetails.stateName === 'mintingTokens'"
              (click)="onClickTransitionToPaymentSubmission()">
              Transition to Payment Submission
            </button>
          </div>
        </td>
      </tr>

      <tr *ngIf="poolDetails.useErc721">
        <th>Number of tokens minted:</th>
        <td>{{poolDetails.numTokensMinted}}</td>
      </tr>

      <tr>
        <th>Total amount paid in so far (Wei):</th>
        <td>{{poolDetails.totalWei}}</td>
      </tr>

      <tr>
        <th>Number of participants:</th>
        <td>{{poolDetails.participantAddresses.length}}</td>
      </tr>

      <tr>
        <th>Participants:</th>
        <td>
          <app-participant-list-widget
            [isOwner]="isOwner"
            [triggerPoolDetailsUpdate]="triggerPoolDetailsUpdate"
            [poolInstance]="poolInstance"
            [poolDetailsUpdateStream]="poolDetailsUpdateStream">
          </app-participant-list-widget>
        </td>
      </tr>

      <tr>
        <th>Number of participants that have paid so far:</th>
        <td>{{poolDetails.numParticipantsPaid}}</td>
      </tr>
    </tbody>
  </table>

  <pre>{{poolDetails | json}}</pre>
</div>

